import { useSuspenseQuery, type UseSuspenseQueryResult } from 'npm:@tanstack/react-query@^5.69.0';

import { useNostr } from '../useNostr.ts';

import type { NostrEvent } from 'jsr:@nostrify/nostrify@^0.46.5';

export function useSocialFeed(): UseSuspenseQueryResult<NostrEvent[]> {
  const { nostr } = useNostr();

  return useSuspenseQuery({
    queryKey: ['social-feed'],
    queryFn: () =>
      nostr.query(
        [{ kinds: [1], limit: 5 }],
        { signal: AbortSignal.timeout(5000) },
      ),
  });
}
